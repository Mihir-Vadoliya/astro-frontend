/*
 *****************************************
 jDealCards

 @author          eoniantec
 @copyright       Copyright (c) 2018 j.
 @license         This j jQuery plugin is under eoniantec license.
 @link            http://eoniantec.com/
 @version         5.3.0

*****************************************/
(function (a) {
    function m(a, b) {
        var f = {
            green: "/card-back_1.png",
            blue: "/card-back_2.png",
            "floral-blue": "/blue_2.jpg",
            red: "/card-back_3.png",
            yellow: "/card-back_4.png",
            purple: "/card-back_5.png",
            pink: "/pink.jpg",
            pattern: "/card-back_6.jpg",
            "classic-blue": "/classic-blue.jpg",
            "classic-red": "/classic-red.jpg",
            alchemy: "/alchemy.jpg",
            question: "/question.jpg",
            peacock: "/peacock.jpg",
            egypt: "/egyptian.jpg",
            animal: "/animal.jpg",
            love: "/love.jpg",
            gipsy: "/gipsy.jpg",
            golden_eye: "/golden_eye.jpg",
            gradient_green: "/gradient_green.jpg",
            vintage: function () {
                for (var a = [], f = 0; f < b; f++) a.push("/landers/landingpages/285642/assets/uicommon/images/tarot/jDealCards/card_" + (Math.floor(6 * Math.random()) + 1) + ".png");
                return a
            }
        };
        if (a in f) return "vintage" != a ? "/landers/landingpages/285642/assets/uicommon/images/tarot/jDealCards" + f[a] : f[a]();
        console.warn(l.cardBackStyle);
        return "/landers/landingpages/285642/assets/uicommon/images/tarot/jDealCards/card-back_2.png"
    }

    function n(a, c, e) {
        -1 < r.indexOf(c) || (c = "smith-waite", console.warn(l.cardDeck));
        e = e.split(",");
        for (var f = e.length - 1; 0 <= f; f--) a.splice(e[f], 1);
        e = a.length;
        for (var d; 0 !== e;) d = Math.floor(Math.random() *
            e), --e, f = a[e], a[e] = a[d], a[d] = f;
        preloaded_card_images = [];
        for (e = 0; e < b.totalResults; e++) a[e].source = a[e].source.replace("{face}", c), preloaded_card_images[e] = new Image, preloaded_card_images[e].src = a[e].source;
        return a
    }

    var l = {
            cardBackStyle: 'jDealCards Property Warning:\n  - The value of the property "cardDeck" must be one this: "green", "blue", "red", "yellow", "purple", "pattern", "vintage" or "classic-blue".\n  - Value has been automatically set to its default "blue".',
            cardDeck: 'jDealCards Property Warning:\n  - The value of the property "cardBackStyle" must be one this: "smith-waite", "durero", "ukiyoe", "swiss-1jj", "marseille" or "dreaming-way".\n  - Value has been automatically set to its default "smith-waite".',
            resultHolder: 'jDealCards Property Warning:\n  - The property "resultHolder" must be set to true in order to show the property "resultName".\n  - If no "resultName" is needed, it must be set to false (default value).',
            totalResults: 'jDealCards Property Warning:\n  - The property "totalResults" must be declared with a number greater than 0.',
            holderLabel: 'jDealCards Property Warning:\n  - The value of the property "holderLabel" must have the same length than the property "totalResults".\n  - Value has been automatically set to "false"'
        },
        r = "smith-waite durero ukiyoe swiss-1jj marseille dreaming-way golden-thread egyptian influence-angels angels animal love fin-siecle".split(" "),
        d = "es en fr pt de it ja".split(" "), c = a("html").attr("lang");
    d = "undefined" === typeof c || !1 === c || "" === c || -1 == d.indexOf(c) ? "en" : a("html").attr("lang");
    c = {
        es: {
            fool: "El Loco",
            magician: "El Mago",
            priestess: "La Sacerdotisa",
            empress: "La Emperatriz",
            emperor: "El Emperador",
            hierophant: "El Sumo Sacerdote",
            lovers: "Los Enamorados",
            chariot: "El Carro",
            strength: "La Fuerza",
            hermit: "El Ermita\u00f1o",
            fortune: "La Rueda de la Fortuna",
            justice: "La Justicia",
            hanged: "El Colgado",
            dead: "La Muerte",
            temperance: "La Templanza",
            devil: "El Diablo",
            tower: "La Torre",
            star: "La Estrella",
            moon: "La Luna",
            sun: "El Sol",
            judgement: "El Juicio",
            world: "El Mundo"
        }, en: {
            fool: "Fool",
            magician: "Magicien",
            priestess: "High Priestess",
            empress: "Empress",
            emperor: "Emperor",
            hierophant: "Hierophant",
            lovers: "Lovers",
            chariot: "Chariot",
            strength: "Strength",
            hermit: "Hermit",
            fortune: "Wheel of Fortune",
            justice: "Justice",
            hanged: "Hanged Man",
            dead: "Dead",
            temperance: "Temperance",
            devil: "Devil",
            tower: "Tower",
            star: "Star",
            moon: "Moon",
            sun: "Sun",
            judgement: "Judgement",
            world: "World"
        }, fr: {
            fool: "Le Mat",
            magician: "Le Bateleur",
            priestess: "La Papesse",
            empress: "L'Imperatrice",
            emperor: "L'Empereur",
            hierophant: "Le Pape",
            lovers: "L'Amoreux",
            chariot: "Le Chariot",
            strength: "La Force",
            hermit: "L'Hermite",
            fortune: "La Roue de Fortune",
            justice: "La Justice",
            hanged: "Le Pendu",
            dead: "La Mort",
            temperance: "La Temperance",
            devil: "Le Diable",
            tower: "La Maison Dieu",
            star: "L'Etoile",
            moon: "La Lune",
            sun: "Le Soleil",
            judgement: "Le Jugement",
            world: "Le Monde"
        }, pt: {
            fool: "O Louco",
            magician: "O Mago",
            priestess: "A Sacerdotisa",
            empress: "A Imperatriz",
            emperor: "O Imperador",
            hierophant: "O Papa",
            lovers: "Os Enamorados",
            chariot: "O Carro",
            strength: "A For\u00e7a",
            hermit: "O Eremita",
            fortune: "A Roda da Fortuna",
            justice: "A Justi\u00e7a",
            hanged: "O Enforcado",
            dead: "A Morte",
            temperance: "A Tempera\u00e7a",
            devil: "O Diabo",
            tower: "A Torre",
            star: "A Estrela",
            moon: "A Lua",
            sun: "O Sol",
            judgement: "O Julgamento",
            world: "O Mundo"
        }, de: {
            fool: "Der Narr",
            magician: "Der Magier",
            priestess: "Die P\u00e4pstin",
            empress: "Die Herrscherin",
            emperor: "Der Herrscher",
            hierophant: "Der Papst",
            lovers: "Die Liebenden",
            chariot: "Der Triumphwagen",
            strength: "Die Kraft",
            hermit: "Der Eremit",
            fortune: "Das Rad des Lebens",
            justice: "Die Gerechtigkeit",
            hanged: "Der Geh\u00e4ngte",
            dead: "Der Tod",
            temperance: "Die M\u00e4\u00dfigkeit",
            devil: "Der Teufel",
            tower: "Der Turm",
            star: "Der Stern",
            moon: "Der Mond",
            sun: "Die Sonne",
            judgement: "Das Gericht",
            world: "Die Welt"
        }, it: {
            fool: "Il Matto",
            magician: "Il Bagatto",
            priestess: "La Papessa",
            empress: "L'Imperatrice",
            emperor: "L'Imperatore",
            hierophant: "Il Papa",
            lovers: "Gli Innamorati",
            chariot: "Il Carro",
            strength: "La Forza",
            hermit: "L'Eremita",
            fortune: "La Ruota della Fortuna",
            justice: "La Giustizia",
            hanged: "L'Appeso",
            dead: "La Morte",
            temperance: "La Temperanza",
            devil: "Il Diavolo",
            tower: "La Casa di Dio",
            star: "La Stella",
            moon: "La Luna",
            sun: "Il Sole",
            judgement: "Il Giudizio",
            world: "Il Mondo"
        }, ja: {
            fool: "\u611a\u8005",
            magician: "\u9b54\u8853\u5e2b",
            priestess: "\u5973\u6559\u7687",
            empress: "\u5973\u5e1d",
            emperor: "\u7687\u5e1d",
            hierophant: "\u6559\u7687",
            lovers: "\u604b\u4eba",
            chariot: "\u6226\u8eca",
            strength: "\u529b",
            hermit: "\u96a0\u8005",
            fortune: "\u904b\u547d\u306e\u8f2a",
            justice: "\u6b63\u7fa9",
            hanged: "\u540a\u308b\u3055\u308c\u305f\u7537",
            dead: "\u6b7b\u795e",
            temperance: "\u7bc0\u5236",
            devil: "\u60aa\u9b54",
            tower: "\u5854",
            star: "\u661f",
            moon: "\u6708",
            sun: "\u592a\u967d",
            judgement: "\u5be9\u5224",
            world: "\u4e16\u754c"
        }
    };
    var t = [{id: "0", name: c[d].fool, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/0.jpg"}, {
        id: "1",
        name: c[d].magician,
        source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/1.jpg"
    }, {id: "2", name: c[d].priestess, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/2.jpg"}, {
        id: "3",
        name: c[d].empress,
        source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/3.jpg"
    }, {id: "4", name: c[d].emperor, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/4.jpg"}, {
        id: "5",
        name: c[d].hierophant,
        source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/5.jpg"
    },
        {id: "6", name: c[d].lovers, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/6.jpg"}, {
            id: "7",
            name: c[d].chariot,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/7.jpg"
        }, {id: "8", name: c[d].strength, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/8.jpg"}, {
            id: "9",
            name: c[d].hermit,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/9.jpg"
        }, {id: "10", name: c[d].fortune, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/10.jpg"}, {
            id: "11",
            name: c[d].justice,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/11.jpg"
        }, {
            id: "12", name: c[d].hanged,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/12.jpg"
        }, {id: "13", name: c[d].dead, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/13.jpg"}, {
            id: "14",
            name: c[d].temperance,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/14.jpg"
        }, {id: "15", name: c[d].devil, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/15.jpg"}, {
            id: "16",
            name: c[d].tower,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/16.jpg"
        }, {id: "17", name: c[d].star, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/17.jpg"}, {
            id: "18",
            name: c[d].moon,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/18.jpg"
        },
        {id: "19", name: c[d].sun, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/19.jpg"}, {
            id: "20",
            name: c[d].judgement,
            source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/20.jpg"
        }, {id: "21", name: c[d].world, source: "/landers/landingpages/285642/assets/uicommon/images/tarot/{face}/21.jpg"}], u = {
        cardBackStyle: "blue",
        cardDeck: "smith-waite",
        excludeCards: "",
        cardResult: "",
        totalCards: 7,
        totalResults: 3,
        resultName: !1,
        resultHolder: !0,
        holderPosition: "above",
        holderLabel: !1,
        holderColor: "rgba(255,255,255,.2)",
        overlap: !0,
        dealSpeed: "fast",
        displayStyle: "inline",
        cardHighlight: !0,
        cardMovement: "top",
        axisFlip: "y",
        cardPerspective: !1,
        perspectiveSettings: {perspective: "100px", rotation: "x", degrees: "45"},
        onCardClick: function () {
            return !0
        },
        callback: function () {
            return !0
        }
    }, h, b, k = {
        init: function (f) {
            f = a.extend({}, u, f);
            h = this;
            b = f;
            return k.dealcards()
        }, resizecards: function () {
            var f = "";
            var c = b.overlap ? h.width() / (b.totalCards - 1) : h.width() / b.totalCards;
            var e = 0;
            a(".j-card-back, .j-result").each(function () {
                b.overlap && (f = c / (b.totalCards - 1) * e);
                a(this).css({width: c + "px", right: f + "px"});
                e++
            });
            if (b.resultHolder) {
                a(".j-results-wrapper").css({
                    width: c *
                        b.totalResults + 10 * b.totalResults + "px"
                });
                var g = c + "px", d = 1.794847052011966 * c + "px";
                a(".j-card-holder").each(function () {
                    a(this).css({width: g});
                    a(this).children().not("p").css({width: g, height: d, "min-height": d})
                })
            }
        }, dealcards: function () {
            null != h.html() && h.html("");
            b.cardBackStyle = m(b.cardBackStyle, b.totalCards);
            b.cardResult = n(t, b.cardDeck, b.excludeCards);
            h.each(function () {
                var f = "", c = "", e;
                b.overlap ? e = h.width() / (b.totalCards - 1) : e = h.width() / b.totalCards;
                for (var d = 0; d < b.totalCards; d++) b.overlap ? c = e / (b.totalCards -
                    1) * d : c = "", f = b.cardBackStyle.constructor != Array ? f + ('<img class="j-card j-card-back" src="' + b.cardBackStyle + '" style="width: ' + e + "px; right: " + c + 'px; display: none;">') : f + ('<img class="j-card j-card-back" src="' + b.cardBackStyle[d] + '" style="width: ' + e + "px; right: " + c + 'px; display: none;">');
                h.append('<div class="j-card-container">' + f + "</div>");
                b.cardPerspective && (h.css("perspective", b.perspectiveSettings.perspective), a(".j-card-container").css({
                    "transform-style": "preserve-3d",
                    transform: "rotate" + b.perspectiveSettings.rotation.toUpperCase() +
                        "(" + b.perspectiveSettings.degrees + "deg)"
                }));
                if (b.resultHolder) {
                    if ($(window).width() < 960) {
                       e = 80;
                    }
                    "below" == b.holderPosition ? a(".j-card-container").after('<div class="j-results-wrapper" style="width: ' + (e * b.totalResults + 10 * (b.totalResults - 1)) + 'px; display: none;"></div>') : a(".j-card-container").before('<div class="j-results-wrapper" style="width: ' + (e * b.totalResults + 10 * b.totalResults) + 'px; display: none;"></div>');
                    f = [];
                    b.holderLabel && (f = b.holderLabel.split(","));
                    for (d = 0; d < b.totalResults; d++) a(".j-results-wrapper").append('<div class="j-card-holder" style="width:' +
                        e + 'px;"><div id="position_' + (d + 1) + '" style="width:' + e + "px; min-height: " + 1.794847052011966 * e + "px; background: " + b.holderColor + '"></div></div>'), b.resultName && a("#position_" + (d + 1)).parent().append('<p class="j-result-name">&nbsp;</p>'), f && f.length == b.totalResults ? a("#position_" + (d + 1)).parent().prepend('<p class="j-result-name">' + f[d] + "</p>") : 0 != b.holderLabel && console.warn(l.holderLabel);
                    a(".j-results-wrapper").fadeIn("slow")
                } else b.resultName && console.warn(l.resultHolder);
                a(".j-card-back").first().fadeIn(b.dealSpeed,
                    function v() {
                        a(".card-holder").each(function (b) {
                            4 > b ? a(this).animate({
                                width: a(".j-card-back").width(),
                                height: a(".j-card-back").height()
                            }, 100) : (a(this).animate({
                                width: a(".j-card").width(),
                                height: a(".j-card").height()
                            }, 100), done_resizing = !0)
                        });
                        0 < a(this).next(".j-card-back").length ? a(this).next(".j-card-back").fadeIn(b.dealSpeed, v) : b.cardHighlight ? k.highlight() : !1
                    });
                a(".j-card-container .j-card-back").first().addClass("active");
                // a(window).resize(k.resizecards)
            });
            return k.showresults()
        }, showresults: function () {
            var f =
                b.totalResults, d = [], c = 1, g = function (c) {
                a(c).css({margin: "0", filter: "brightness(110%)", "z-index": "10", transform: "rotateX(360deg)"});
                "x" == b.axisFlip ? a(c).css("transform", "rotateX(360deg)") : a(c).css("transform", "rotateY(360deg)");
                b.resultHolder ? a(c).attr("src", b.cardResult[f - 1].source).off("click mouseenter").addClass("j-result") : (a(c).attr("src", b.cardResult[f - 1].source).off("click mouseenter").removeClass("j-card-back").addClass("j-result"), a(h).trigger("resultShown").off());
                f--;
                d.push(c)
            }, p = function (d) {
                if (0 <
                    f) {
                    if (b.onCardClick()) if (b.resultHolder) {
                        a(".j-card-back").off("click");
                        var e = "#position_" + c;
                        d = a(e).offset().left;
                        var q = a(e).offset().top;
                        var m = a(this).offset().left, n = a(this).offset().top;
                        a(this).css("left", m).css("top", n).css("position", "absolute");
                        a(this).appendTo("body").animate({left: d, top: q}, {
                            complete: function () {
                                a(this).clone().css("opacity", "0").appendTo(e).removeClass("j-card-back j-result").addClass("j-result_" + (c - 1)).css({
                                    position: "relative",
                                    width: "",
                                    top: "0px",
                                    left: "0px",
                                    right: "0px"
                                }).css("opacity",
                                    "1");
                                b.resultName && a(".j-result_" + (c - 1)).parent().next("p").html(b.cardResult[f].name);
                                a(h).trigger("resultShown").off()
                            }
                        });
                        c++;
                        g(this);
                        a(".j-result").eq(c - 2).fadeOut("fast", function () {
                            if (0 == f) a(".j-card-back").off("click"), setTimeout(function () {
                                return k.callback()
                            }, 500); else a(".j-card-back").on("click", p)
                        })
                    } else g(this), 0 == f && (a(".j-card-back").off("click mouseenter").fadeOut("slow"), a(".j-card-container").css("justify-content", "center"), a(".j-result").animate({right: 0}, 500, function () {
                        if (f + 1 == b.totalResults) return k.callback();
                        f++
                    }))
                } else console.warn(l.totalResults)
            };
            a(".j-card-back").on("click", p)
        }, highlight: function () {
            var c = !0, d = !1, e = !1, g = {
                init: function () {
                    c && !d && a(".j-card-back.active").each(function () {
                        g.cardUp(this)
                    })
                }, cardUp: function (c) {
                    $el = a(c);
                    $el.css("filter", "brightness(120%)");
                    "top" == b.cardMovement ? $el.css("margin-top", "-20px") : "left" == b.cardMovement || "right" == b.cardMovement ? $el.css("margin-right", "20px") : "bottom" == b.cardMovement && $el.css("margin-bottom", "-20px");
                    setTimeout(function () {
                        g.cardDown(c)
                    }, 500)
                }, cardDown: function (b) {
                    $el =
                        a(b);
                    e || ($el.css({
                        margin: "0",
                        filter: "brightness(100%)"
                    }).removeClass("active"), setTimeout(function () {
                        g.next(b)
                    }, 500))
                }, mouseEnter: function (c) {
                    g.stop();
                    a(".j-card-back.active").css({margin: "0", filter: "brightness(100%)"});
                    $el = a(c);
                    $el.css("filter", "brightness(110%)");
                    "top" == b.cardMovement ? $el.css("margin-top", "-20px") : "left" == b.cardMovement || "right" == b.cardMovement ? $el.css("margin-right", "20px") : "bottom" == b.cardMovement && $el.css("margin-bottom", "-20px");
                    return e = !0
                }, mouseLeave: function (b) {
                    a(".j-card-back").each(function () {
                        $el =
                            a(b);
                        $el.css({margin: "0", filter: "brightness(100%)"});
                        if (a(this).is(":hover")) return c = !1;
                        if (1 > a(this).next().length) {
                            g.cardDown(this);
                            e = !1;
                            a(".j-card-back").each(function () {
                                a(this).on("click", function () {
                                    g.stop();
                                    d = !0
                                })
                            });
                            if (d) return g.stop();
                            g.play()
                        }
                    })
                }, next: function (b) {
                    $el = a(b);
                    1 == $el.next().length ? $el.next().addClass("active") : a(".j-card-container .j-card-back").first().addClass("active");
                    g.init()
                }, play: function () {
                    d || (c = !0);
                    g.init()
                }, stop: function () {
                    return c = !1
                }
            };
            g.init();
            a(".j-card-back").mouseenter(function () {
                g.mouseEnter(this)
            }).mouseleave(function () {
                g.mouseLeave(this)
            })
        },
        destroy: function (a) {
        }, pick: function () {
            var b = Math.floor(Math.random() * (a(".j-card-back").length - 1));
            a(".j-card-back").eq(b).click()
        }, callback: function () {
            a("#card-step").slideUp("slow", function () {
                a(this).remove()
            });
            b.callback()
        }
    };
    a.fn.jDealCards = function (b) {
        if (k[b]) return k[b].apply(this, Array.prototype.slice.call(arguments, 1));
        if ("object" !== typeof b && b) a.error('The method "' + b + "\" doesn't exists in jDealCards plugin"); else return k.init.apply(this, arguments)
    }
})(jQuery);
