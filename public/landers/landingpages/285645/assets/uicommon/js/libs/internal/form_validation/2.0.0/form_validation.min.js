/*
 *****************************************
 Form Validation

 @author          eoniantec
 @copyright       Copyright (c) 2018 j.
 @license         This j jQuery plugin is under eoniantec license.
 @link            http://eoniantec.com/
 @version         2.0.0

*****************************************/
var main_class="."+DOM_ELEMENTS.main_class_name,help_class="."+DOM_ELEMENTS.help_class_name,error_class=DOM_ELEMENTS.error_class_name,success_class=DOM_ELEMENTS.success_class_name,suggestion_class=DOM_ELEMENTS.suggestion_class_name,email_input=DOM_ELEMENTS.email_input;function lang(a){if("undefined"===typeof LANGUAGE)return console.log("Key object is not defined"),"";var b="object"===typeof LANGUAGE&&a in LANGUAGE?LANGUAGE[a]:"";b.length||console.log("Key string %s is not defined",a);return b}
function is_valid_email(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}function is_valid_text(a){return!(new RegExp(/[@\u00ac#=_,!\u00a1%&:;~`\u00b4|<>\^"\/\\\[\]\(\)\{\}\$\*\+\|\u00bf\?\d]+/g)).test(a)}function days_in_month(a,b){switch(a){case 2:return 0==b%4&&b%100||0==b%400?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}
function is_valid_date(a,b,c){a=parseInt(a);b=parseInt(b);c=parseInt(c);return 0<b&&12>=b&&0<a&&0<c&&a<=days_in_month(b,c)}
function fix_selector_date(){var a=$("#day_select").val(),b=$("#month_select").val(),c=$("#year_select").val();"02"==b||"2"==b?($('#day_select option[value="30"], #day_select option[value="31"]').remove(),null!=c&&0==c%4?(0==$('#day_select option[value="29"]').length&&$("#day_select").append('<option value="29">29</option>'),null!=a&&29<a&&$('#day_select option[value="29"]').prop("selected",!0)):null!=c&&0<c%4?(null!=a&&28<a&&$('#day_select option[value="28"]').prop("selected",!0),$('#day_select option[value="29"]').remove()):
null!=a&&28<a&&$('#day_select option[value="28"]').prop("selected",!0)):"04"==b||"4"==b||"06"==b||"6"==b||"09"==b||"9"==b||"11"==b?($('#day_select option[value="31"]').remove(),0==$('#day_select option[value="29"]').length&&$("#day_select").append('<option value="29">29</option>'),0==$('#day_select option[value="30"]').length&&$("#day_select").append('<option value="30">30</option>'),null!=a&&30<a&&$('#day_select option[value="30"]').prop("selected",!0)):(0==$('#day_select option[value="29"]').length&&
$("#day_select").append('<option value="29">29</option>'),0==$('#day_select option[value="30"]').length&&$("#day_select").append('<option value="30">30</option>'),0==$('#day_select option[value="31"]').length&&$("#day_select").append('<option value="31">31</option>'))}function show_error(a,b){a.addClass(error_class);a.find(help_class).html("<small>"+lang(b)+"</small>")}function hide_error(a){a.removeClass(error_class);a.find(help_class).html("")}
function turn_into_error(a){a.removeClass(success_class).addClass(error_class)}function turn_into_success(a){a.removeClass(error_class).addClass(success_class)}function init_live_validation(a){set_mail_check();set_live_form_validation(a)}
function set_live_form_validation(a){a.find("[required]").each(function(){if("checkbox"!=$(this).attr("type")&&"radio"!=$(this).attr("type")&&!$(this).is("select"))$(this).on("blur",function(){var b=$(this).closest(main_class),a=$(this).val();0==a.length||0==a?show_error(b,"mandatory_field"):"email"!=$(this).attr("type")||is_valid_email(a)?"text"!=$(this).attr("type")||is_valid_text(a)?hide_error(b):show_error(b,"field_invalid"):show_error(b,"email_incorrect")})});a.find('[type="text"][name="first_name_step"], [type="text"][name="last_name_step"], [type="text"][name="first_name"], [type="text"][name="last_name"]').each(function(){$(this).on("keyup keypress",
function(a){a=String.fromCharCode(a.keyCode);if(!is_valid_text(a))return!1})});a.find('[type="checkbox"][required]').each(function(){$(this).on("change",function(){var a=$(this).closest(main_class);$(this).is(":checked")?hide_error(a):show_error(a,"mandatory_tos")})});a.find('[type="radio"][required]').each(function(a,c){$(this).on("change",function(){var a=$(this).closest(main_class);hide_error(a)})});a.find("select[required]").each(function(){$(this).on("change",function(){fix_selector_date();var a=
$(this).closest(main_class),c=!0;$(this).parent().find("select").each(function(){if(null==$(this).val()||""==$(this).val())c=!1});c&&hide_error(a)})});a.find(".check_date").each(function(){$(this).on("change",function(){var a=$(this).closest(main_class),c=parseInt($("."+DOM_ELEMENTS.day_input).val()),d=parseInt($("."+DOM_ELEMENTS.month_input).val()),e=parseInt($("."+DOM_ELEMENTS.year_input).val());is_valid_date(c,d,e)?hide_error(a):show_error(a,"birthdate_incorrect")})});a.find(".check_phone").each(function(){$(this).on("blur",
function(){var a=$("#"+DOM_ELEMENTS.phone_input),c=$(this).closest(main_class);0<a.val().length&&!a.intlTelInput("isValidNumber")?show_error(c,"phone_invalid"):hide_error(c)})})}var submited=!1;
function formSubmit(a){var b=!0;$(a).find("[required]").each(function(){if("checkbox"!=$(this).attr("type")&&"radio"!=$(this).attr("type")&&!$(this).is("select")){var a=$(this).closest(main_class),c=$(this).val();0==c.length||0==c?(turn_into_error(a),show_error(a,"mandatory_field"),b=!1):"email"!=$(this).attr("type")||is_valid_email(c)?"text"!=$(this).attr("type")||is_valid_text(c)?(turn_into_success(a),hide_error(a)):(show_error(a,"field_invalid"),b=!1):(turn_into_error(a),show_error(a,"email_incorrect"),
b=!1)}});$(a).find('[type="checkbox"][required]').each(function(){var a=$(this).closest(main_class);$(this).is(":checked")?(turn_into_success(a),hide_error(a)):(turn_into_error(a),show_error(a,"mandatory_tos"),b=!1)});var c=!1;$(a).find('[type="radio"][required]').each(function(a,b){c=c||b.checked});var d=$(a).find('[type="radio"][required]').closest(main_class);c?(turn_into_success(d),hide_error(d)):$(a).find('[type="radio"][required]').length&&(turn_into_error(d),show_error(d,"mandatory_field"),
b=!1);$(a).find("select[required]").each(function(){var a=!0,c=$(this).closest(main_class);$(this).parent().find("select").each(function(){if(null==$(this).val()||""==$(this).val())$(this).addClass("select-error"),a=!1});a?(turn_into_success($(this).closest(main_class)),hide_error(c)):(turn_into_error(c),show_error(c,"mandatory_field"),b=!1)});validate_date(a)||(b=!1);$(a).find(".check_cards").each(function(){3>num_cards.length?($(this).addClass(DOM_ELEMENTS.error_class_name),$(this).find(help_class).html(lang("mandatory_field")),
b=!1):($(this).removeClass(DOM_ELEMENTS.error_class_name),$(this).find(help_class).html(""))});if(submited)return!1;b&&(submited=!0,0<$("#button_container").length?$("#button_container").html(lang("processing")):0<$(".button_container").length&&$(".button_container").html(lang("processing")));return b}
function validate_gender(a){var b=!0;$(a).find('[type="radio"][required]').each(function(){var a=$(this).closest(main_class);if($(this).is(":checked"))return turn_into_success(a),hide_error(a),b=!0,!1;turn_into_error(a);show_error(a,"mandatory_field");b=!1});return b}
function validate_date(a){var b=!0;$(a).find("select[required]").each(function(){var c=$(this).closest(main_class),d=parseInt($(a).find("#day_select").val()),e=parseInt($(a).find("#month_select").val()),f=parseInt($(a).find("#year_select").val());is_valid_date(d,e,f)?(turn_into_success(c),hide_error(c)):(turn_into_error(c),show_error(c,"birthdate_incorrect"),b=!1)});return b}
function validateRequiredInput(a){var b=!0;$(a).find('[type="text"][required]').each(function(){var a=$(this).closest(main_class),d=$(this).val();0==d.length||0==d?(turn_into_error(a),show_error(a,"mandatory_field"),b=!1):is_valid_text(d)?(turn_into_success(a),hide_error(a)):(show_error(a,"field_invalid"),b=!1)});return b}
function set_mail_check(){$('[name="'+email_input+'"]').on("blur",function(){$(this).mailcheck({domains:DOMAINS,topLevelDomains:TOP_LEVEL_DOMAINS,suggested:function(a,b){$("."+suggestion_class).html(lang(suggestion_class)+' <a class="suggestion-email">'+b.full+"</a> ?")},empty:function(a){$("."+suggestion_class).html("")}})});$("."+suggestion_class).click(function(){var a=$('[name="'+email_input+'"]');a.val($("."+suggestion_class+" a").html());hide_error(a);$(this).html("")})}
function set_date_mobile(a){$("#"+a).change(function(){var a=new Date(this.valueAsDate),c=a.getMonth()+1;10>c&&(c="0"+c);$("."+DOM_ELEMENTS.day_input).val(a.getDate());$("."+DOM_ELEMENTS.month_input).val(c);$("."+DOM_ELEMENTS.year_input).val(a.getFullYear())})};